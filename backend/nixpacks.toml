# Railway Nixpacks Configuration for Python 3.12 with uv
[phases.setup]
nixPkgs = ["python312", "gcc"]

[phases.setup.nixLibraries]
libs = ["libpq"]

[phases.install]
cmds = [
    "pip install uv",
    "uv venv /opt/venv",
    ". /opt/venv/bin/activate && uv pip install asyncpg sqlalchemy[asyncio] fastapi[standard] uvicorn[standard] pydantic-settings python-jose[cryptography] passlib[bcrypt] python-multipart redis alembic python-dotenv email-validator celery"
]

[start]
cmd = "/opt/venv/bin/python -m uvicorn main:app --host 0.0.0.0 --port $PORT"

[variables]
PYTHON_VERSION = "3.12"
